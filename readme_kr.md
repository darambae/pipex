
# pipex (with bonus)

## 목차

- [소개](#소개)
- [기능](#기능)
- [사용법](#사용법)
- [중요 함수들](#중요-함수들)
- [부모와 자식 프로세스](#부모와-자식-프로세스)
- [보너스 파트](#보너스-파트)

---

## 소개

**pipex**는 UNIX 파이프와 파일 디스크립터의 작동 방식을 학습하기 위해 설계된 프로젝트로, 입출력 리디렉션을 처리하여 셸 파이프라인 기능을 시뮬레이션합니다.

---

## 기능

- 파일 디스크립터와 `dup2`를 사용하여 두 명령어로 셸 파이프라인을 에뮬레이트.
- 파일과 명령어 간의 표준 입출력 리디렉션 지원.
- 파일 접근과 명령어 실행에 대한 강력한 오류 처리 포함.
- **보너스**: 여러 명령어 파이프와 특정 구분자가 나올 때까지 표준 입력에서 읽는 `here_doc` 기능.

---

## 사용법

### 기본 사용법

```bash
./pipex 파일1 명령어1 명령어2 파일2
```

- `파일1`: 입력 파일.
- `명령어1`: 첫 번째 명령어.
- `명령어2`: 두 번째 명령어.
- `파일2`: 출력 파일.

예시:

```bash
./pipex infile "cat" "grep hello" outfile
```

---

## 중요 함수들

### `open`

- **사용법**: `int fd = open("file.txt", O_RDONLY);`
- 파일을 열어 읽기, 쓰기, 추가 모드로 파일 디스크립터 반환.

### `close`

- **사용법**: `close(fd);`
- 열린 파일 디스크립터를 닫아 자원 해제.

### `read`

- **사용법**: `int bytes_read = read(fd, buffer, sizeof(buffer));`
- 파일 디스크립터에서 데이터를 읽어 버퍼에 저장.

### `write`

- **사용법**: `write(fd, buffer, bytes_to_write);`
- 버퍼에서 데이터를 파일 디스크립터에 쓰기.

### `pipe`

- **사용법**: `pipe(pipefd);`
- 프로세스 간 일방향 통신 채널을 생성.

### `dup2`

- **사용법**: `dup2(fd, STDOUT_FILENO);`
- 파일 디스크립터를 다른 파일 디스크립터로 복제.

### `fork`

- **사용법**: `pid_t pid = fork();`
- 현재 프로세스를 복제하여 새 프로세스 생성.

### `execve`

- **사용법**: `execve(path, args, env);`
- 현재 프로세스를 새로운 프로그램으로 대체.

### `waitpid`

- **사용법**: `waitpid(pid, &status, 0);`
- 특정 자식 프로세스가 종료될 때까지 대기.

### `perror`

- **사용법**: `perror("에러 메시지");`
- 현재 `errno` 값에 해당하는 오류 메시지를 출력.

---

## 부모와 자식 프로세스

**pipex**에서는 `fork()`로 프로세스를 생성하여 파이프라인에서 명령어를 실행합니다.

---

## 보너스 파트

**pipex**의 보너스 파트는 `here_doc` 기능을 추가합니다.
